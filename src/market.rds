# ===============================================================
# market.rds
#
# Project: Revolution Now
#
# Created by dsicilia on 2022-08-23.
#
# Description: Rds definitions for the market module.
#
# ===============================================================
# ss
include "ss/commodity.rds.hpp"

namespace "rn"

struct.CommodityPrice {
  bid 'int', # in hundreds.
  ask 'int', # in hundreds.
}

struct.PurchaseInvoice {
  purchased 'Commodity',
  cost 'int',

  # Some commodities (namely the ones in price groups) get an im-
  # mediate manual bump to their current price after a transac-
  # tion, in addition to any that may occur due to normal
  # price-to-equilibrium-price evolution which also sometimes
  # happens after a purchase. This one needs to be added to any
  # other bumps before determining the final price change, if
  # any, since the current price can only change by one in each
  # transaction or turn.
  manual_price_bump 'int',
}

struct.SaleInvoice {
  sold 'Commodity',
  received_before_taxes 'int',
  tax_rate 'int',
  tax_amount 'int',
  received_final 'int',

  # See comments from PurchaseInvoice.
  manual_price_bump 'int',

  # See comments from PurchaseInvoice.
  evolve_volumes 'bool',
}

struct.PriceChange {
  from 'int',
  to 'int',
}
