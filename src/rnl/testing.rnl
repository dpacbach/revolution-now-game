# ===============================================================
# testing.rnl
#
# Project: Revolution Now
#
# Created by dsicilia on 2020-11-02.
#
# Description: RNL definitions for unit testing.
#
# ===============================================================
#import some_other_rnl_module;

include <string>;
include <variant>;
include <vector>;

namespace rnl_test;

# Descriptive comment.
sumtype Monostate {};

# Descriptive comment.
sumtype Maybe {
  .template: T;
  .features:
    formattable;

  nothing:
  just:
    T val;
};

sumtype MyVariant0 {
  .features:
    formattable;

  # Comment on last line.
};

# Descriptive comment.
sumtype MyVariant1 {
  happy:
  sad:
    bool hello;
  excited:
};

sumtype MyVariant2 {
  .features: formattable;

  first:
    std::string name;
    bool b;
  second:
    bool flag1;
    bool flag2;
  third:
    int cost;
};

namespace rnl_test.util  ;

sumtype MyVariant3 {
  .features:
    serializable;

  a1:
    MyVariant1_t var1;
  a2:
    MyVariant1_t var1;
    MyVariant2_t var2;
  a3:
    char* ptr;
};

# Descriptive comment.
sumtype MyVariant4 {
  # List of features.
  .features:
    serializable,
    formattable;

  # Alternatives.
  first:
    int i;
    char c;
  _2nd:
  third:
    std::string s;
    MyVariant3_t var3;
};

# Descriptive comment.
sumtype TemplateTwoParams {
  .template:
    T, U;

  # List of features.
  .features:
    serializable,
    formattable;

  # Alternatives.
  first_alternative:
    T t;
    char c;
  second_alternative:
  third_alternative:
    Maybe_t<T> hello;
    U u;
};