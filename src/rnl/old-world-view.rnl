# ===============================================================
# old-world-view.rnl
#
# Project: Revolution Now
#
# Created by dsicilia on 2020-11-13.
#
# Description: RNL definitions for the old-world-view module.
#
# ===============================================================
include "cargo.hpp";
include "commodity.hpp";
include "id.hpp";

namespace rn;

# This object needs to specify all of the information necessary
# for a dragged item to be drawn. We cannot simply use a tile
# here because we need to know where the item came from so that
# it can (potentially) be left out when rendering the scene, to
# create the appearance that the mouse is dragging it.
sumtype OldWorldDraggableObject {
  unit:
    UnitId id;
  market_commodity:
    e_commodity type;
  cargo_commodity:
    Commodity      comm;
    CargoSlotIndex slot;

  .features:
    formattable,
    equality;
};

sumtype OldWorldDragSrc {
  dock:
    UnitId id;
  cargo:
    CargoSlotIndex slot;
    maybe<int> quantity;
  outbound:
    UnitId id;
  inbound:
    UnitId id;
  inport:
    UnitId id;
  market:
    e_commodity type;
    maybe<int> quantity;
};

sumtype OldWorldDragDst {
  cargo:
    CargoSlotIndex slot;
  dock:
  outbound:
  inbound:
  inport:
  inport_ship:
    UnitId id;
  market:
};
