# ===============================================================
# natives.rds
#
# Project: Revolution Now
#
# Created by dsicilia on 2022-10-30.
#
# Description: Rds definitions for the natives module.
#
# ===============================================================
# ss
include "ss/dwelling-id.hpp"
include "ss/dwelling.rds.hpp"
include "ss/native-enums.rds.hpp"
include "ss/tribe.rds.hpp"

# gfx
include "gfx/coord.hpp"

# refl
include "refl/enum-map.hpp"

# base
include "base/maybe.hpp"

# C++ standard library
include "<unordered_map>"

namespace "rn.wrapped"

struct.NativesState {
  next_dwelling_id 'DwellingId',

  tribes 'refl::enum_map<e_tribe, base::maybe<Tribe>>',

  dwellings 'std::unordered_map<DwellingId, Dwelling>',

  # Note that all players see the same native land ownership in
  # the sense that one one player takes a square from the natives
  # it will appear unowned from then on to all nations. The ex-
  # ception to this is the acquisition of Peter Minuit; he will
  # cause all land to appear non-owned but only from the perspec-
  # tive of that player. Therefore, acquiring Peter Minuit will
  # not actually change this owned-land field. Instead, we need
  # to remember to consult the Peter Minuit status when dealing
  # with owned land in general.
  owned_land 'std::unordered_map<Coord, DwellingId>',

  _features { equality, validation }
}
