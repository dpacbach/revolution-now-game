# ===============================================================
# map-square.rds
#
# Project: Revolution Now
#
# Created by dsicilia on 2021-03-02.
#
# Description: RDS definitions for the map-square module.
#
# ===============================================================
# Revolution Now
include "maybe.hpp"
include "enum-map.hpp"

# Rds
include "nation.rds.hpp"
include "terrain.rds.hpp"

namespace "rn"

# Important: since there are so many of these, it is best to set
# it up so that the most common values of the fields will be
# their default values so that they can be omitted from the save
# file.
struct.MapSquare {
  # Which nations have explored this square.
  visibility 'EnumMap<e_nation, bool>',

  # Is this land or water.
  surface 'e_surface',

  # The value of this is meaningful for any square that is either
  # land or borders land. For water tiles that are surrounded by
  # water (entirely) the value is inconsequential, and so it will
  # typically be set to the first enum value so that it can just
  # assume its default value. For hills, mountains, and coastal
  # tiles, this has a meaningful value but only for rendering
  # purposes, not for game mechanics purposes. An example would
  # be that mountains still need a terrain type to render at the
  # base of their mountains so as to make them continuous with
  # surrounding squares.
  ground 'e_ground_terrain',

  # Forest, hills, or mountains.
  overlay 'maybe<e_land_overlay>',

  # Note that forest squares can have rivers too, but not moun-
  # tains or hills.
  river 'maybe<e_river>',

  # This is any special resource that a square has, beyond what
  # can normally be produced by its terrain type. It will be rep-
  # resented as its own icon on top of the square.
  resource 'maybe<e_natural_resource>',

  # This can only be done on certain squares, and also can't
  # co-exist with a forest terrain type.
  irrigation 'bool',

  # This can exist on any land square.
  road 'bool',

  # Only on ocean squares. The only difference between this and
  # regular ocean squares is that when a ship enters a sea lane
  # square the game will ask if they want to sail to the old
  # world.
  sea_lane 'bool',

  # In the original game this was a giant gold coin over the
  # square that you could enter to risk either getting some kind
  # of reward or making the natives unhappy.
  lost_city_rumor 'bool',
}
