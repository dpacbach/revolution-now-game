# ===============================================================
# harbor-view-entities.rds
#
# Project: Revolution Now
#
# Created by dsicilia on 2022-09-08.
#
# Description: Rds definitions for the harbor-view-entities module.
#
# ===============================================================
# Revolution Now
include "maybe.hpp"

# ss
include "ss/cargo.hpp"
include "ss/commodity.rds.hpp"
include "ss/unit-id.hpp"
include "ss/units.rds.hpp"

namespace "rn"

enum.e_harbor_view_entity {
  status_bar,
  market,
  cargo,
  in_port,
  outbound,
  inbound,
  exit,
  backdrop,
  dock,
}

# This object needs to specify all of the information necessary
# for a dragged item to be drawn. We cannot simply use a tile
# here because we need to know where the item came from so that
# it can (potentially) be left out when rendering the scene, to
# create the appearance that the mouse is dragging it.
sumtype.HarborDraggableObject {
  unit {
    id 'UnitId',
    # If the unit has a harbor state (i.e., it is not in a ship's
    # cargo) then that state needs to be preserved so that when
    # the unit is disowned from the source we can remember what
    # its harbor state was, which is needed if e.g. a unit is
    # moved from inbound to outbound so that it can keep its po-
    # sition on the high seas.
    harbor_state 'maybe<UnitHarborViewState>',
  },
  market_commodity {
    comm 'Commodity',
  },
  cargo_commodity {
    comm 'Commodity',
    slot 'CargoSlotIndex',
  },
}
