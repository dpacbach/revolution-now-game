--[[ ------------------------------------------------------------
| cargo.rds
|
| Project: Revolution Now
|
| Created by dsicilia on 2020-11-13.
|
| Description: RDS definitions for the cargo module.
|
--]] ------------------------------------------------------------
-- Flatbuffers
include'fb/cargo_generated.h'

namespace'rn'

-- Here is an example of the way the cargo layout works:
--
-- +------------------------------------------------------------+
-- |         |         |         |         |         |          |
-- |  Comm.  | UnitId  | Overfl. |  Empty  |  Empty  |  UnitId  |
-- |         |         |         |         |         |          |
-- +------------------------------------------------------------+
--      1        2         3          4         5         6
--
-- That means that the first slot is occupied by a commodity, the
-- second AND third slots are occupied by a single unit that
-- takes up two slots, the fourth slot is empty, the fifth slot
-- is empty, and the last slot is occupied by a unit (that takes
-- one slot).
--
-- NOTE: the `empty` state must be first in the list so that it
-- it will be the default-constructed value.
CargoSlot = sumtype{
  alt{ empty={} },
  alt{ overflow={} },
  alt{ cargo={ var{ contents='Cargo' } } },

  [features_key]={ 'formattable', 'equality', 'serializable' }
}
